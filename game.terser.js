"use strict";(()=>{function n(n,t){return(i,e)=>{i.t[e]|=4,i[2][e]={i:n,o:t}}}function t(n=1/0){return(t,i)=>{t.t[i]|=4194304,t[22][i]={l:n,u:0}}}function i(n){Bn=198706*n}function e(){return((Bn=16807*Bn%2147483647)-1)/2147483646}function o(n=0,t=1){return~~(e()*(t-n+1)+n)}function r(n){return n[o(0,n.length-1)]}function a(n){return 1-(1-n)**4}function l(n,t,i,e){let o=n[2][t].o,r=n[22][t],l=r.u/r.l;n.m.font=o/125+1+"vmin Impact",n.m.textAlign="center",n.m.fillStyle=`rgba(255,232,198,${a(1-l)})`,n.m.fillText(o.toFixed(0),i,e-50-a(l)*o/5)}function s(n,t,i,e){let o=n[2][t].o,r=n[22][t],l=r.u/r.l;n.m.font="10vmin Impact",n.m.fillStyle=`rgba(255,255,0,${a(1-l)})`,n.m.fillText("+ $"+o.toLocaleString("en"),i+100,e-150*a(l))}function f(n,t,i,e){let o=n[22][t];n.m.fillStyle=`rgba(255,79,79,${.4*(1-o.u/o.l)**3})`,n.m.fillRect(0,0,n.h.width,n.h.height)}function u(n){return(t,i)=>{t.t[i]|=131072,t[17][i]={T:n}}}function c(n,t){return(i,e)=>{let o=i.g.createVertexArray();i.g.bindVertexArray(o),i.g.bindBuffer(jn,i.g.createBuffer()),i.g.bufferData(jn,On.v,_n),i.g.enableVertexAttribArray(1),i.g.vertexAttribPointer(1,3,it,!1,0,0),i.g.bindBuffer(jn,i.g.createBuffer()),i.g.bufferData(jn,On.p,_n),i.g.enableVertexAttribArray(2),i.g.vertexAttribPointer(2,3,it,!1,0,0),i.g.bindBuffer(jn,i.g.createBuffer()),i.g.bufferData(jn,n,_n),i.g.enableVertexAttribArray(3),i.g.vertexAttribPointer(3,4,it,!1,0,0),i.g.vertexAttribDivisor(3,1),i.g.bindBuffer(Qn,i.g.createBuffer()),i.g.bufferData(Qn,On.U,_n),i.g.bindVertexArray(null),i.t[e]|=2,i[1][e]={C:1,R:i.M,k:o,A:On.U.length,N:n.length/4,F:t}}}function m(){let n=new Float32Array(16);return n[0]=1,n[5]=1,n[10]=1,n[15]=1,n}function h(n,t){let i=t[0],e=t[1],o=t[2],r=t[3],a=t[4],l=t[5],s=t[6],f=t[7],u=t[8],c=t[9],m=t[10],h=t[11],d=t[12],T=t[13],g=t[14],v=t[15],p=i*l-e*a,y=i*s-o*a,U=i*f-r*a,C=e*s-o*l,b=e*f-r*l,R=o*f-r*s,M=u*T-c*d,k=u*g-m*d,A=u*v-h*d,N=c*g-m*T,w=c*v-h*T,F=m*v-h*g,x=p*F-y*w+U*N+C*A-b*k+R*M;return x?(x=1/x,n[0]=(l*F-s*w+f*N)*x,n[1]=(o*w-e*F-r*N)*x,n[2]=(T*R-g*b+v*C)*x,n[3]=(m*b-c*R-h*C)*x,n[4]=(s*A-a*F-f*k)*x,n[5]=(i*F-o*A+r*k)*x,n[6]=(g*U-d*R-v*y)*x,n[7]=(u*R-m*U+h*y)*x,n[8]=(a*w-l*A+f*M)*x,n[9]=(e*A-i*w-r*M)*x,n[10]=(d*b-T*U+v*p)*x,n[11]=(c*U-u*b-h*p)*x,n[12]=(l*k-a*N-s*M)*x,n[13]=(i*N-e*k+o*M)*x,n[14]=(T*y-d*C-g*p)*x,n[15]=(u*C-c*y+m*p)*x,n):null}function d(n,t,i){let e=t[0],o=t[1],r=t[2],a=t[3],l=t[4],s=t[5],f=t[6],u=t[7],c=t[8],m=t[9],h=t[10],d=t[11],T=t[12],g=t[13],v=t[14],p=t[15],y=i[0],U=i[1],C=i[2],b=i[3];return n[0]=y*e+U*l+C*c+b*T,n[1]=y*o+U*s+C*m+b*g,n[2]=y*r+U*f+C*h+b*v,n[3]=y*a+U*u+C*d+b*p,y=i[4],U=i[5],C=i[6],b=i[7],n[4]=y*e+U*l+C*c+b*T,n[5]=y*o+U*s+C*m+b*g,n[6]=y*r+U*f+C*h+b*v,n[7]=y*a+U*u+C*d+b*p,y=i[8],U=i[9],C=i[10],b=i[11],n[8]=y*e+U*l+C*c+b*T,n[9]=y*o+U*s+C*m+b*g,n[10]=y*r+U*f+C*h+b*v,n[11]=y*a+U*u+C*d+b*p,y=i[12],U=i[13],C=i[14],b=i[15],n[12]=y*e+U*l+C*c+b*T,n[13]=y*o+U*s+C*m+b*g,n[14]=y*r+U*f+C*h+b*v,n[15]=y*a+U*u+C*d+b*p,n}function T(n,t,i,e,o){return n[0]=1/i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1/t,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=-2/(o-e),n[11]=0,n[12]=0,n[13]=0,n[14]=-(o+e)/(o-e),n[15]=1,n}function g(n,t){return n[0]=t[8],n[1]=t[9],n[2]=t[10],C(n,n)}function v(n,t){return n[0]=t[12],n[1]=t[13],n[2]=t[14],n}function p(n,t,i){return n[0]=t[0]+i[0],n[1]=t[1]+i[1],n[2]=t[2]+i[2],n}function y(n,t,i){return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],n}function U(n,t,i){return n[0]=t[0]*i,n[1]=t[1]*i,n[2]=t[2]*i,n}function C(n,t){let i=t[0],e=t[1],o=t[2],r=i*i+e*e+o*o;return r>0&&(r=1/Math.sqrt(r)),n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n}function b(n,t,i){let e=t[0],o=t[1],r=t[2],a=i[3]*e+i[7]*o+i[11]*r+i[15];return a=a||1,n[0]=(i[0]*e+i[4]*o+i[8]*r+i[12])/a,n[1]=(i[1]*e+i[5]*o+i[9]*r+i[13])/a,n[2]=(i[2]*e+i[6]*o+i[10]*r+i[14])/a,n}function R(n){return Math.hypot(n[0],n[1],n[2])}function M(n,t,i,e){let o=t[0],r=t[1],a=t[2];return n[0]=o+e*(i[0]-o),n[1]=r+e*(i[1]-r),n[2]=a+e*(i[2]-a),n}function k(n,t,i,e){let o=.5*Math.PI/180;i*=o,e*=o;let r=Math.sin(t*=o),a=Math.cos(t),l=Math.sin(i),s=Math.cos(i),f=Math.sin(e),u=Math.cos(e);return n[0]=r*s*u-a*l*f,n[1]=a*l*u+r*s*f,n[2]=a*s*f-r*l*u,n[3]=a*s*u+r*l*f,n}function A(n,t,i){let e=R(y([],n,t)),o=1/e,r=[];for(let a=0;a<e;a++)r=r.concat([...M([],n,t,o*a),i]);return r}function N(n){let t=[...ot,...r(rt)],i=e()>.4,a=e()>.4,l=20+8*o(),s=30+8*o(0,5),f=15+o(0,9),m=[],h=[];for(let n=1;n<l;n++)m.push(...A([n,0,s-1],[n,f,s-1],n%2?9:10));for(let n=1;n<s;n++)m.push(...A([l,0,n],[l,f*(i?1.5:1),n],n%2?9:10)),m.push(...A([0,f,n],[l+1,f,n],1));for(let n=-1;n<l+3+8;n++)m.push(...A([n-1,0,0],[n-1,0,s+2],1));if(a&&i){let t=5,i=4;for(let e=t;e<s-t-1;e+=3*t)h.push({I:k([],0,180*o(0,2),0),S:[l+1,f+i/2,s-e-t/2],K:[c(n.Y[6]),u(2)]})}else{let n=5+o(0,2),t=~~(.75*s),r=~~((s-t)/2);for(let o=2;o<t;o++)for(let a=0;a<n;a++)m.push(l+1,~~(f*(i?1.5:1))+a-~~(n/2),r+o,e()>.4||2==o||o==t-1||0==a||a==n-1?1:2)}for(let n=0;n<8;n++)m.push(...A([l+n+1,.75*f,1],[l+n+1,.75*f,s+1],1));m.push(...A([l+8,0,1],[l+8,.75*f,1],1),...A([l+8,0,s],[l+8,.75*f,s],1)),m.push(...A([l+8,3,1],[l+8,3,s],1));for(let n=1;n<s;n+=2)m.push(...A([l+8,0,n],[l+8,5,n],1));for(let n=0;n<8;n++)m.push(...A([l+1,0,s-n-8],[l+1,8,s-n-8],1));return{$:{S:[0,1.5,0],K:[c(Float32Array.from(m),t)],P:h},X:l+3+8+1,q:s+2}}function w(n){return(t,i)=>{let e={};for(let t in n){let{D:i,L:o=7}=n[t],r=i[i.length-1].W;e[t]={D:i.map((n=>({...n}))),L:o,B:r,G:0}}t.t[i]|=64,t[6][i]={O:e,_:e[1]}}}function F(n){return{I:k([],270,0,0),S:[0,-3,0],K:[c(n.Y[4])]}}function x(n){let t=function(n){let t=at.slice();t.splice(6,3,...r(lt)),t.splice(9,3,...r(st));let i=2*o(2,3),a=2*o(Math.max(2,i/2),5),l=o(1,3),s=l>1,f=e()>.4,u=[];for(let n=0;n<i;n++)u.push(...A([-a/2+.5,0,-i/2+n+.5],[a/2+.5,0,-i/2+n+.5],2));f&&u.push(...A([a/2-.5,1,-i/2+.5],[a/2-.5,1,i/2+.5],2),...A([-a/2+.5,1,-i/2+.5],[-a/2+.5,1,i/2+.5],2));for(let n=0;n<l;n++)for(let t=0;t<2;t++)u.push(...A([-.5,n+1,-1+t+.5],[1.5,n+1,-1+t+.5],s&&0==n?3:2));return{S:[0,3,0],P:[{K:[c(Float32Array.from(u),t),w({1:{D:[{W:0}]},4:{D:[{W:0,S:[0,0,0]},{W:.1,S:[0,2,0]},{W:.2,S:[0,0,0]}],L:0},6:{D:[{W:0,S:[0,0,0],I:[0,0,0,1]},{W:.1,S:[0,2,0],I:[0,1,0,0]},{W:.2,S:[0,0,0],I:[0,0,0,-1]}],L:0}})]}]}}(),i=at.slice();return i.splice(0,3,...r(ft)),i.splice(3,3,...r(mt)),i.splice(12,3,...r(ut)),i.splice(15,3,...r(ct)),{I:[0,1,0,0],K:[w({1:{D:[{W:0}]},5:{D:[{W:0,S:[0,1,0],I:[0,1,0,0]},{W:1,S:[0,-4,0],I:k([],-90,0,0),V:a},{W:5,S:[0,-9,0]}],L:0}})],P:[{S:[1.5,0,-5]},{K:[c(n.Y[0],i),w({1:{D:[{W:0,I:k([],0,5,0)},{W:.5,I:k([],0,-5,0)}]},2:{D:[{W:0,I:k([],0,5,0)},{W:.2,I:k([],0,-5,0)}]}})],P:[t]},{S:[1.5,0,.5],K:[w({1:{D:[{W:0,I:k([],5,0,0)},{W:.5,I:k([],-5,0,0)}]},2:{D:[{W:0,I:k([],60,0,0)},{W:.2,I:k([],-30,0,0)}]},3:{D:[{W:0,I:k([],50,0,0)},{W:.1,I:k([],90,0,0),V:a},{W:.13,I:k([],110,0,0)},{W:.3,I:k([],0,0,0),V:a}],L:0}})],P:[{S:[0,-1,0],K:[c(n.Y[3],i)]},F(n)]},{S:[-1.5,0,.5],K:[w({1:{D:[{W:0,I:k([],-5,0,0)},{W:.5,I:k([],5,0,0)}]},2:{D:[{W:0,I:k([],-30,0,0)},{W:.2,I:k([],60,0,0)}]}})],P:[{S:[0,-1,0],K:[c(n.Y[3],i)]}]},{S:[.5,-2,.5],K:[w({1:{D:[{W:0,I:k([],5,0,0)},{W:1,I:k([],5,0,0)}]},2:{D:[{W:0,I:k([],-45,0,0)},{W:.2,I:k([],45,0,0)}]}})],P:[{S:[0,-1.5,0],K:[c(n.Y[2],i)]}]},{S:[-.5,-2,.5],K:[w({1:{D:[{W:0,I:k([],-5,0,0)},{W:1,I:k([],-5,0,0)}]},2:{D:[{W:0,I:k([],45,0,0)},{W:.2,I:k([],-45,0,0)}]}})],P:[{S:[0,-1.5,0],K:[c(n.Y[2],i)]}]}]}}function E(n){return(t,i)=>{t.t[i]|=32,t[5][i]={j:n,G:0}}}function I(n=!0,t=[1,1,1],i=1){return(e,o)=>{e.t[o]|=256,e[8][o]={H:o,J:!0,Z:n,nn:t,tn:[0,0,0],l:[0,0,0],en:[],L:i}}}function S(n,{on:t,rn:i}){for(let e=0;e<n.t.length;e++)if(1024&n.t[e]&&n[10][e].on==t&&n[10][e].rn==i)return e;throw`No entity with coords ${t}, ${i}.`}function K(n,t){return(i,e)=>{i.t[e]|=65536,i[16][e]={an:n,ln:t,sn:[],fn:0}}}function Y(n=[1,1,1],t=1){return(i,e)=>{i.t[e]|=16,i[4][e]=[...n,t**2]}}function z(n,t){return(i,e)=>{i.t[e]|=2,i[1][e]={C:2,R:i.un,cn:i.g.createBuffer(),mn:[...n,t]}}}function $(n=0){return(t,i)=>{t.t[i]|=2097152,t[21][i]={B:n}}}function P(n){return(t,i)=>{t.t[i]|=512,t[9][i]={hn:n}}}function X(n){return{S:[0,1.5,0],I:k([],0,90*o(0,3),0),K:[c(Float32Array.from(A([-1,0,0],[1,0,0],4)),ot),I(!1,[4,4,4]),P(10),E(),u(802)],P:[{S:[0,3,0],K:[Y([1,1,0],3),u(16)]}]}}function q(n){let t=n.Y[7];return{S:[.1,o(0,2)+.1,.1],I:k([],90*o(0,3),90*o(0,3),90*o(0,3)),K:[c(t),u(2)]}}function D(n,t,i=0,r=0,a=!0,l=[5,6]){let s=function(n,t){let i=[];for(let n=0;n<8;n++)for(let o=0;o<8;o++)i.push(n-4+.5,.5,o-4+.5,e()>.01?t[0]:t[1]);return Float32Array.from(i)}(0,l),f={K:[c(s,ot),u(2),E(),w({1:{D:[{W:0,S:[0,0,0]}]},6:{D:[{W:0,S:[0,0,0]},{W:.1,S:[0,-.5,0]},{W:.2,S:[0,0,0]}],L:0}})],P:[]};return t?e()>.85?f.P.push(function(n){let t=function(){let n=o(1,4),t=[];for(let i=0;i<n;i++){let n=o(-1,1);t.push(i,0,n,0)}return Float32Array.from(t)}();return{S:[0,1.5,0],I:k([],0,90*o(0,3),0),K:[c(t,ot),u(2)]}}()):a&&e()<.01&&f.P.push(X()):f.P.push(e()>.5?function(n){let t=n.Y[1];return{S:[0,o(2,5)+.5,0],K:[c(t),u(2)]}}(n):e()>.01?q(n):function(n){return{S:[0,1.5,0],K:[c(n.Y[5]),u(2)],P:[{K:[I(!1,[15,15,15]),P(12),u(768)],P:[{K:[$(1/0),K(2,.1),z([1,0,0],15),u(2162690)]},{S:[0,3,0],K:[Y([1,.5,0],3),u(16)]}]}]}}(n)),{I:k([],0,90*o(0,3),0),S:[0,0,0],K:[I(!1,[8,1,8],t?4:1),u(256),(m=i,h=r,(n,t)=>{n.t[t]|=1024,n[10][t]={on:m,rn:h}})],P:[f]};var m,h}function L(n){return(t,i)=>{t.t[i]|=8,t[3][i]={H:i,dn:n,Tn:m(),gn:m(),vn:m(),pn:m()}}}function W(n){return{S:[0,200,0],K:[(t=n,(n,i)=>{n.t[i]|=32768,n[15][i]={yn:t}})],P:[{S:[50,50,50],I:[-.28,.364,.116,.88],P:[{K:[L(25),(n,t)=>{n.t[t]|=2048,n[11][t]={Un:[]}},$()]}]}]};var t}function B(n){return(t,i)=>{t.t[i]|=16384,t[14][i]={l:n,_:n}}}function G(n=3.5,t=.5){return(i,e)=>{i.t[e]|=128,i[7][e]={Cn:n,bn:t}}}function O(n=!0,t=!1){return(i,e)=>{i.t[e]|=524288,i[19][e]={Rn:n,Mn:t,kn:0}}}function _(n=0,t=0){return(i,e)=>{i.t[e]|=262144,i[18][e]={on:n,rn:t,An:null,Nn:[],wn:0,Fn:0}}}function V(n,t,i,e){let o=n[0][t].xn.H,r=n[14][o],a=.01*n.h.height;8192&n.t[o]?n.m.fillStyle="#0f0":524288&n.t[o]&&n[19][o].Mn?(n.m.fillStyle="#ff0",a*=2):n.m.fillStyle="#f00",n.m.fillRect(i-.05*n.h.width,e,.1*n.h.width*r._/r.l,a)}function j(n){let t=[{K:[c(function(n,t){let i=[];for(let n=0;n<8;n++)for(let t=0;t<8;t++)for(let o=0;o<6;o++)i.push(n-4+.5,o-4+.5,t-4+.5,e()>.4?7:8);return Float32Array.from(i)}(),ot),u(2)]}];return e()<.1&&t.push({P:[{S:[0,0,4],K:[c(new Float32Array(4),[1,.5,0]),u(2)]},{S:[0,1,7],K:[u(16),Y([1,.5,0],5)]}]}),{S:[0,4,0],K:[I(!1,[8,4,8],1),u(256)],P:t}}function Q(t){i(t.En),t.In=void 0,t.Sn=!0,t.t=[],t.Kn=[],t.g.clearColor(.8,.3,.2,1);let e=30;for(let n=0;n<e;n++){t.Kn[n]=[];for(let i=0;i<e;i++)t.Kn[n][i]=0==n||29==n||0==i||29==i?NaN:1/0}H(t,[0,29],[0,29],e,.3);for(let n=0;n<e;n++)for(let i=0;i<e;i++){let e=t.Kn[n][i]==1/0,o=e?D(t,e,n,i,!0,[7,8]):j();t.Yn({...o,S:[8*(-15+n),o.S[1],8*(-15+i)]})}t.Yn({S:[1,2,-1],K:[Y([.5,.5,.5],0),E(ht)]}),t.Kn[28]&&t.Kn[28][28]&&!isNaN(t.Kn[28][28])&&t.Yn({zn:[1.5,1.5,1.5],S:[104,7.5,104],I:k([],0,90*o(0,3),0),K:[O(!1,!0),_(28,28),G(o(12,16),0),I(!0,[7,7,7],8),B(5e3*t.$n),(n,t)=>{n.t[t]|=4096,n[12][t]={yn:null}},E()],P:[(i(t.En),x(t)),{S:[0,10,0],K:[n(V)]}]});for(let i=0;i<20;i++){let i=o(4,e),r=o(4,e);t.Kn[i]&&t.Kn[i][r]&&!isNaN(t.Kn[i][r])&&t.Yn({S:[8*(-15+i),4.3+Math.random(),8*(-15+r)],K:[O(!1),_(i,r),G(o(8,15)),I(!0,[7,7,7],8),B(2e3*t.$n),(n,t)=>{n.t[t]|=4096,n[12][t]={yn:null}},E()],P:[x(t),{S:[0,10,0],K:[n(V)]}]})}i(t.Pn),t.Xn=t.Yn({S:[-112,5,-112],K:[(n,t)=>{n.t[t]|=8192,n[13][t]={}},_(1,1),G(25,0),I(!0,[3,7,3],16),B(1e4),(n,t)=>{n.t[t]|=4096,n[12][t]={yn:null}},E()],P:[x(t),{S:[0,25,0],K:[Y([1,1,1],20)]},{S:[0,10,0],K:[n(V)]}]}),t.Yn({zn:[240,60,240],S:[-4,-29.51,-4],K:[c(Float32Array.from([0,0,0,7]),ot)]}),t.Yn(W(t.Xn))}function H(n,[t,i],[e,o],r,a){if(i-t>=o-e){if(i-t>3){let l=Math.ceil((t+i)/2),s=o-1,f=e+1,u=~~(Math.random()*(s-f+1))+f,c=!1,m=!1;n.Kn[o][l]==1/0&&(u=s,c=!0),n.Kn[e][l]==1/0&&(u=f,m=!0);for(let t=e+1;t<o;t++){if(c&&m){if(t==s||t==f)continue}else if(t==u)continue;n.Kn[t][l]=Math.random()>a?NaN:1/0}H(n,[t,l],[e,o],r,a),H(n,[l,i],[e,o],r,a)}}else if(o-e>3){let l=Math.ceil((e+o)/2),s=i-1,f=t+1,u=~~(Math.random()*(s-f+1))+f,c=!1,m=!1;n.Kn[l][i]==1/0&&(u=s,c=!0),n.Kn[l][t]==1/0&&(u=f,m=!0);for(let e=t+1;e<i;e++){if(c&&m){if(e==s||e==f)continue}else if(e==u)continue;n.Kn[l][e]=Math.random()>a?NaN:1/0}H(n,[t,i],[e,l],r,a),H(n,[t,i],[l,o],r,a)}}function J(t){i(t.En);let e=30,r=o(20,25)||20,a=o(10,20)||10;t.In=void 0,t.Sn=!0,t.t=[],t.Kn=[],t.g.clearColor(.8,.3,.2,1);for(let n=0;n<e;n++){t.Kn[n]=[];for(let i=0;i<e;i++)t.Kn[n][i]=0==n||29==n||0==i||29==i?NaN:1/0}H(t,[0,29],[0,29],e,.6);for(let n=a;n<a+6+3;n++)for(let i=r-1;i<r+4-1;i++)t.Kn[i][n]=i==r-1+4-2&&n!==a||n>=a+6?1/0:NaN;for(let n=0;n<e;n++)for(let i=0;i<e;i++){let e=D(t,t.Kn[n][i]==1/0,n,i);t.Yn({...e,S:[8*(-15+n),e.S[1],8*(-15+i)]})}t.Yn({S:[1,2,-1],K:[Y([.5,.5,.5],0),E(ht)],P:[{K:[E(dt)]}]});for(let i=0;i<20;i++){let i=o(4,e),r=o(4,e);t.Kn[i]&&t.Kn[i][r]&&!isNaN(t.Kn[i][r])&&t.Yn({S:[8*(-15+i),4.3+Math.random(),8*(-15+r)],K:[O(!1),_(i,r),G(o(8,15)),I(!0,[7,7,7],8),B(1500*t.$n),(n,t)=>{n.t[t]|=4096,n[12][t]={yn:null}},E()],P:[x(t),{S:[0,10,0],K:[n(V)]}]})}let l=function(n){let t=[...A([-2,2,0],[-2,2,52],8),...A([2,2,0],[2,2,52],8)];for(let n=0;n<26;n++)t.push(...A([-6,0,n],[-6,14,n],n%2?1:0),...A([6,0,n],[6,14,n],n%2?1:0),...A([-6,14,n],[6,14,n],n%2?0:1));for(let n=0;n<52;n+=2)t.push(...A([-4,1,n],[4,1,n],0));return{P:[{...q(n),zn:[4,4,4]},{S:[4,0,0],K:[c(Float32Array.from(t),ot)]},{S:[0,0,18],K:[I(!1,[8,8,8]),P(7)]}]}}(t);t.Yn({S:[8*(-15+r)+4,0,8*(-15+a)+4],...l}),i(t.Pn),t.Xn=t.Yn({S:[-112,5,-112],K:[(n,t)=>{n.t[t]|=8192,n[13][t]={}},_(1,1),G(25,0),I(!0,[3,7,3],16),B(1e4),(n,t)=>{n.t[t]|=4096,n[12][t]={yn:null}},E()],P:[x(t),{S:[0,25,0],K:[Y([1,1,1],20)]},{S:[0,10,0],K:[n(V)]}]}),t.Yn({zn:[240,60,240],S:[-4,-29.51,-4],K:[c(Float32Array.from([0,0,0,5]),ot)]}),t.Yn(W(t.Xn))}function Z(n){i(n.Pn),n.In=void 0,n.Sn=!0,n.t=[],n.g.clearColor(.9,.7,.3,1);let t=n.Yn({K:[w({1:{D:[{W:0,I:[0,0,0,1]},{W:2,I:[0,1,0,0]},{W:4,I:[0,0,0,-1]}],L:2}})],P:[x(n)]});n.Yn(W(t)),n.Yn({S:[1,1,1],K:[Y([.5,.5,.5],0)]}),n.Yn({S:[-15,15,15],K:[Y([1,1,1],25)]})}function nn(n,t,i){let e=(240-t)/2,o=[...A([4,4,-120],[4,4,-120+e],1),...A([4,4,-120+e+t],[4,4,120],1)];if(o.push(...A([4,0,-120+e],[4,1.5*t,-120+e],1),...A([4,0,-120+e+t],[4,1.5*t,-120+e+t],1),...A([4,1.5*t,-120+e],[4,1.5*t,-120+e+t+1],1)),n.En)for(let o=0;o<t/8;o++)n.Kn[i][e/8+o]=1/0;else o.push(...A([4,4,-120+e],[4,4,-120+e+t],1));for(let n=-112;n<120;n+=8)(n<-120+e||n>-120+e+t)&&o.push(...A([4,0,n],[4,6,n],1));return{S:[8*(-15+i)-4,0,-3],K:[c(Float32Array.from(o),ot)],P:[{S:[20,0,0],K:[I(!1,[8,8,800]),P(6)]}]}}function tn(n,t){let i=n[11][n.In.H];if(n.qn.d0&&i.Dn){if(4&i.Dn.L){let e=rn(n,t,n[10][i.Dn.H]);e&&(n[18][t].Nn=e)}8&i.Dn.L&&4096&n.t[t]&&(n[12][t].yn=v([],n[0][i.Dn.H].t),n[21][n.In.H].B=.2)}n.qn.d2&&4096&n.t[t]&&(n[12][t].yn=i.Un,n[21][n.In.H].B=.2)}function en(n,{on:t,rn:i}){return[{on:t-1,rn:i},{on:t+1,rn:i},{on:t,rn:i-1},{on:t,rn:i+1},{on:t-1,rn:i-1},{on:t+1,rn:i-1},{on:t-1,rn:i+1},{on:t+1,rn:i+1}].filter((({on:t,rn:i})=>t>=0&&t<n.Kn.length&&i>=0&&i<n.Kn[0].length))}function on(n,{on:t,rn:i}){for(let t=0;t<n.Kn.length;t++)for(let i=0;i<n.Kn[0].length;i++)Number.isNaN(n.Kn[t][i])||(n.Kn[t][i]=1/0);n.Kn[t][i]=0;let e,o=[{on:t,rn:i}];for(;e=o.shift();)if(n.Kn[e.on][e.rn]<15)for(let t of en(n,e))n.Kn[t.on][t.rn]>n.Kn[e.on][e.rn]+1&&(n.Kn[t.on][t.rn]=n.Kn[e.on][e.rn]+1,o.push(t))}function rn(n,t,i){let e=n[18][t];if(on(n,e),!(n.Kn[i.on][i.rn]<1/0))return!1;let o=[];for(;i.on!=e.on||i.rn!=e.rn;){o.push(i);let t=en(n,i);for(let e=0;e<t.length;e++){let o=t[e];n.Kn[o.on][o.rn]<n.Kn[i.on][i.rn]&&(i=n[10][S(n,o)])}}return o}function an(n,t,i,e){let o=n[2][t].o,r=n[22][t].u;n.m.font="10vmin Impact",n.m.textAlign="center",n.m.fillStyle="#FFE8C6",n.m.fillText(o,i,e+10*Math.sin(5*r))}function ln(r,a,l){i(r.Ln);let f=[0,465,468,547];r.In=void 0,r.Sn=!0,r.t=[],r.Kn=[],r.g.clearColor(.8,.3,.2,1);for(let n=0;n<30;n++){r.Kn[n]=[];for(let t=0;t<30;t++){let i=20==n||1==n,o=i||0==n||f.includes(30*n+t)||e()>.04;r.Kn[n][t]=o&&!i?1/0:NaN;let a=D(r,o,n,t,!1);r.Yn({...a,S:[8*(-15+n),0,8*(-15+t)]})}}r.Yn(nn(r,16,20));let u=0;for(let n=0;n<4;n++){let n=N(r),t=n.X/8,i=n.q/8;if(u+i>30)break;r.Yn({S:[-41.5,0,8*(-15+u)-3.5],P:[n.$]});for(let n=u;n<u+i;n++)for(let i=10;i<10+t;i++)r.Kn[i][n]=NaN;u+=n.q/8+o(1,2)}for(let n=0;n<20;n++){let n=o(0,30),t=o(0,30);r.Kn[n]&&r.Kn[n][t]&&!isNaN(r.Kn[n][t])&&r.Yn({S:[8*(-15+n),4.3+Math.random(),8*(-15+t)],K:[O(),_(n,t),G(o(15,25),0)],P:[x(r)]})}if(r.Wn||(r.Wn={on:15,rn:15}),on(r,r.Wn),a)r.Yn({S:[1,2,-1],K:[Y([.7,.7,.7],0),E(dt)]}),r.Xn=r.Yn({K:[_(15,15)]});else{r.Yn({S:[1,2,-1],K:[Y([.5,.5,.5],0),E(Tt)],P:[{K:[E(gt)]},{K:[E(dt)]}]}),r.Yn({S:[0,5,24],I:k([],0,90,0),K:[I(!1,[8,8,8]),P(5)],P:[x(r),{S:[0,10,0],K:r.En?[]:[n(an,"!"),t()]}]}),r.Yn({S:[24,5,-64],K:[I(!1,[8,8,8]),P(4)],P:[x(r),{S:[0,10,0],K:[n(an,"$"),t()]}]});let e=r[0][S(r,r.Wn)].S;i(r.Pn),r.Xn=r.Yn({S:[e[0],5,e[2]],K:[(n,t)=>{n.t[t]|=8192,n[13][t]={}},_(r.Wn.on,r.Wn.rn),G(25,0),I(!0,[3,7,3],16),B(1e4)],P:[x(r),{S:[0,25,0],K:[Y([1,1,1],20)]}]}),l&&r.Yn({K:[n(s,l),t(4)]})}r.Yn({...nn(r,0,2),I:k([],0,180,0)}),r.Bn>0&&r.Bn<1e4&&(r.Kn[1][15]=1/0),r.Yn({S:[-120,5,-120],K:[I(!1,[8,8,8]),P(6)],P:[x(r)]}),r.Yn({...X(),S:[56,1.5,0]}),r.Yn({zn:[240,60,240],S:[-4,-29.51,-4],K:[c(Float32Array.from([0,0,0,5]),ot)]}),r.Yn(W(r.Xn))}function sn(n){ln(n,!0)}function fn(n){i(n.En),n.In=void 0,n.Sn=!0,n.t=[],n.g.clearColor(.9,.7,.3,1),n.Yn({K:[w({1:{D:[{W:0,I:[0,0,0,1]},{W:2,I:[0,1,0,0]},{W:4,I:[0,0,0,-1]}],L:2}})],P:[x(n)]}),n.Yn({S:[0,2,10],K:[L(10)]}),n.Yn({S:[1,1,1],K:[Y([.5,.5,.5],0)]}),n.Yn({S:[-15,15,15],K:[Y([1,1,1],25)]})}function un(i,e,r){switch(e){case 1:i.Audio.close(),i.Audio=new AudioContext,i.Gn=ln,setTimeout(i.Gn,0,i,!1,1e3*i.$n),i.Bn+=1e3*i.$n,i.$n+=1,i.On=0,i.Wn=void 0,i.En=0;break;case 2:i.Bn=0,i.$n=1,i.On=0,i.Wn=void 0,i.En=0,i.Gn=sn,setTimeout(i.Gn,0,i);break;case 3:i.Audio.close(),i.Audio=new AudioContext,i.Gn=ln,setTimeout(i.Gn,0,i);break;case 5:i.Wn=i[18][i.Xn],i.En=i.Ln*i.$n-1,i.Gn=fn,setTimeout(i.Gn,0,i);break;case 4:i._n=document.monetization&&"started"==document.monetization.state,i.Wn=i[18][i.Xn],i.Gn=Z,setTimeout(i.Gn,0,i);break;case 11:i._n&&(i.Pn=1e4*Math.random()),setTimeout(i.Gn,0,i);break;case 6:i.Audio.close(),i.Audio=new AudioContext,i.Gn=J,setTimeout(i.Gn,0,i);break;case 7:i.Audio.close(),i.Audio=new AudioContext,i.Gn=i.En?Q:ln,setTimeout(i.Gn,0,i);break;case 8:{let[e,o]=r;i.Yn({S:i[0][e].S.slice(),K:[n(l,o),t(1)]}),8192&i.t[e]&&i.Yn({K:[n(f),t(1)]});break}case 10:{let[e]=r,a=o(100,1e3);i.Bn+=a,i[5][e].Vn=Gn,i.Yn({S:i[0][i.Xn].S.slice(),K:[n(s,a),t(1)]}),t(0)(i,e);break}case 9:{let n=r[0];if(8192&i.t[n])i.t[n]&=-24961,i.On=2;else if(524288&i.t[n]){if(i[19][n].Mn){i.On=1;for(let n=0;n<i.t.length;n++)524288&i.t[n]&&(i.t[n]&=-262145)}i.t[n]&=-541057,setTimeout((()=>i.jn(n)),5e3)}break}case 12:{i.jn(r[0]);let n=i[14][i.Xn];n._=n.l}}}function*cn(n,t,i){n.t[t.H]&1<<i&&(yield n[i][t.H]);for(let e of t.P)yield*cn(n,e,i)}function mn(n,t,i){let e=n.createProgram();if(n.attachShader(e,hn(n,Jn,t)),n.attachShader(e,hn(n,Hn,i)),n.linkProgram(e),!n.getProgramParameter(e,nt))throw Error(n.getProgramInfoLog(e));return e}function hn(n,t,i){let e=n.createShader(t);if(n.shaderSource(e,i),n.compileShader(e),!n.getShaderParameter(e,Zn))throw Error(n.getShaderInfoLog(e));return e}function dn(n,t){let i=n[12][t];if(i.yn){let e=n[0][t],o=n[7][t],r=g([],e.t),a=Math.atan2(r[2],r[0]),l=y([],i.yn,e.S);o.Qn=k([],0,57*(a-Math.atan2(l[2],l[0])),0)}}function Tn(n,t,i){let e=n[0][t],o=n[6][t],r=o.Vn&&o.O[o.Vn];r&&1&o._.L&&(o._=r,o.Vn=void 0),o._.G+=i,o._.G>o._.B&&(o._.G=o._.B);let a=null,l=null;for(let n of o._.D){if(o._.G<=n.W){l=n;break}a=n}if(a&&l){let n=(o._.G-a.W)/(l.W-a.W);l.V&&(n=l.V(n)),a.S&&l.S&&(M(e.S,a.S,l.S,n),e.Hn=!0),a.I&&l.I&&(function(n,t,i,e){let o,r,a,l,s,f=t[0],u=t[1],c=t[2],m=t[3],h=i[0],d=i[1],T=i[2],g=i[3];r=f*h+u*d+c*T+m*g,r<0&&(r=-r,h=-h,d=-d,T=-T,g=-g),1-r>et?(o=Math.acos(r),a=Math.sin(o),l=Math.sin((1-e)*o)/a,s=Math.sin(e*o)/a):(l=1-e,s=e),n[0]=l*f+s*h,n[1]=l*u+s*d,n[2]=l*c+s*T,n[3]=l*m+s*g}(e.I,a.I,l.I,n),e.Hn=!0)}if(o._.G==o._.B){if(o._.G=0,4&o._.L)for(let n of o._.D.reverse())n.W=o._.B-n.W;r?(o._=r,o.Vn=void 0):2&o._.L||(o._=o.O[1])}}function gn(n,t,i,e){let o,r,a=n.currentTime+e,l=0,s=n.createGain();if(s.gain.value=(t[0]/9)**3,t[5]&&(r=n.createOscillator(),r.type=t[5],r.frequency.value=(t[7]/3)**3,o=n.createGain(),o.gain.value=(t[6]+3)**3,r.connect(o)),t[1]){let i=n.createBiquadFilter();i.type=t[1],i.frequency.value=2**t[2],i.Q.value=t[3]**1.5,o&&t[4]&&o.connect(i.detune),s.connect(i),i.connect(n.destination)}else s.connect(n.destination);for(let e of t[8]){let t=n.createGain();t.connect(s);let r=(e[1]/9)**3,f=(e[2]/9)**3,u=(e[3]/9)**3,c=f+u+(e[4]/6)**3;if(t.gain.setValueAtTime(0,a),t.gain.linearRampToValueAtTime(r,a+f),t.gain.setValueAtTime(r,a+f+u),t.gain.exponentialRampToValueAtTime(1e-5,a+c),e[0]){let r=n.createOscillator();r.type=e[0],r.connect(t),r.detune.value=3*(e[5]-7.5)**3,o&&e[6]&&o.connect(r.detune);let l=440*2**((i-69)/12);if(e[7]){let n=(e[8]/9)**3,t=(e[9]/9)**3,i=(e[10]/6)**3;r.frequency.linearRampToValueAtTime(0,a),r.frequency.linearRampToValueAtTime(l,a+n),r.frequency.setValueAtTime(l,a+n+t),r.frequency.exponentialRampToValueAtTime(1e-5,a+n+t+i)}else r.frequency.setValueAtTime(l,a);r.start(a),r.stop(a+c)}else{let i=n.createBufferSource();i.buffer=vn(n),i.loop=!0,i.connect(t),i.start(a),i.stop(a+c)}c>l&&(l=c)}r&&(r.start(a),r.stop(a+l))}function vn(n){if(!Ln){let t=(Ln=n.createBuffer(1,2*n.sampleRate,n.sampleRate)).getChannelData(0);for(let n=0;n<t.length;n++)t[n]=2*Math.random()-1}return Ln}function pn(n,t,i){let e=n[5][t];if(e.Vn&&(!e._||e.G>e._.Jn)){for(let t of e.Vn.Zn)for(let i=0;i<t.nt.length;i++)t.nt[i]&&gn(n.Audio,t.tt,t.nt[i],.15*i);e._=e.Vn,e.G=0}else e.G+=i;e.Vn=e.j}function yn(n,t){let i=n[0][t],e=n[3][t];if(n.In=e,n.Sn){let t=n.it.width/n.it.height;t>1?T(e.Tn,e.dn,e.dn*t,1,500):T(e.Tn,e.dn/t,e.dn,1,500),h(e.gn,e.Tn)}h(e.vn,i.t),d(e.pn,e.Tn,e.vn)}function Un(n,t,i){for(let r=0;r<i;r++){let i=t[r];(e=n).tn[0]<(o=i).l[0]&&e.l[0]>o.tn[0]&&e.tn[1]<o.l[1]&&e.l[1]>o.tn[1]&&e.tn[2]<o.l[2]&&e.l[2]>o.tn[2]&&(n.en.push(i),i.en.push(n))}var e,o}function Cn(n,t){let i=v([],n.t),e=U([],t.nn,.5);y(t.tn,i,e),p(t.l,i,e)}function bn(n,t,i){let e=n[18][t],r=n[19][t].Rn,a=n[19][t].kn<=0,l=n[18][n.Xn],s=Math.abs(n.Kn[e.on][e.rn]-n.Kn[l.on][l.rn]),f=[];if(!e.Nn.length&&!e.An){if(r||s>5){let i=o(1,15);for(;i==n.Kn[e.on][e.rn];)i=o(1,15);f=function(n,t,i){let e=n[18][t],o=n[10][S(n,e)],r=n.Kn[e.on][e.rn],a=i>r?1:-1,l=[];if(!(r<16))return!1;for(;i!==r;){if(l.length>10)return!1;l.push(o);let t=en(n,o).sort((()=>.5-Math.random()));for(let i=0;i<t.length;i++){let e=t[i];if(n.Kn[e.on][e.rn]==r+1*a){o=n[10][S(n,e)],r=n.Kn[o.on][o.rn];break}}}return l.reverse()}(n,t,i)}else f=rn(n,n.Xn,e),f&&(f.pop(),f.pop(),f=f.reverse());f&&f.length>1&&(e.Nn=f)}!r&&4096&n.t[t]&&(s<4&&a?(n[12][t].yn=n[0][n.Xn].S,n[19][t].kn=.5,e.Nn=[]):n[19][t].kn-=i)}function Rn(n,t){let i=n[20][t],e=n[7][t],o=n[8][t];if(o.en.length>0){n.jn(t);for(let t of o.en)16384&n.t[t.H]&&(n[14][t.H].et=Math.random()*i.et+Math.random()*i.et)}else e.ot=g([],n[0][t].t)}function Mn(n,t){let i=n[17][t];v(Ct,n[0][t].t),b(Ct,Ct,n.In.vn),Math.abs(Ct[0])>1/n.In.Tn[0]+8||Math.abs(Ct[1])>1/n.In.Tn[5]+8?n.t[t]&=~i.T:n.t[t]|=i.T}function kn(n,t){let i=n[14][t];if(i.et){un(n,8,[t,i.et]),i._-=i.et,i.et=0;for(let i of cn(n,n[0][t],6))i.Vn=4}if(i._<=0){i._=0,un(n,9,[t]);for(let i of cn(n,n[0][t],6))i.Vn=5}}function An(n,t,i){let e=n[22][t];e.u+=i,e.u>e.l&&n.jn(t)}function Nn(n,t,i){let e=n[0][t],o=n[7][t];if(o.ot){U(o.ot,o.ot,o.Cn*i),p(e.S,e.S,o.ot),e.Hn=!0,o.ot=void 0;for(let t of cn(n,e,6))t.Vn=2}else for(let t of cn(n,e,6))t.Vn=1;o.Qn&&(function(n,t,i){let e=t[0],o=t[1],r=t[2],a=t[3],l=i[0],s=i[1],f=i[2],u=i[3];n[0]=e*u+a*l+o*f-r*s,n[1]=o*u+a*s+r*l-e*f,n[2]=r*u+a*f+e*s-o*l,n[3]=a*u-e*l-o*s-r*f}(e.I,o.Qn,e.I),e.Hn=!0,o.Qn=void 0)}function wn(n,t){let i=n[18][t];if(!i.An&&i.Nn.length){let t=i.Nn.pop(),e=S(n,t);i.wn=t.on,i.Fn=t.rn,i.An=n[0][e].S}if(i.An){let e=n[0][t],o=y([],[i.An[0],e.S[1],i.An[2]],e.S);R(o)<1&&(i.on=i.wn,i.rn=i.Fn,i.An=null);let r=n[7][t];r.ot=C(o,o);let a=g([],e.t);r.Qn=k([],0,57*(Math.atan2(a[2],a[0])-Math.atan2(o[2],o[0])),0)}}function Fn(n,t,i){let e=n[16][t],o=n[0][t];if(e.fn+=i,e.fn>e.ln){e.fn=0;let n=v([],o.t);e.sn.push(...n,0)}for(let n=0;n<e.sn.length;)e.sn[n+3]+=i/e.an,e.sn[n+3]>1?e.sn.splice(n,4):n+=4}function xn(n,t,i){i&&(i.textContent=t.toFixed(1)+" ms")}function En(n,t,i){n.g.uniformMatrix4fv(i.R.rt[1],!1,t.t),n.g.uniform4fv(i.R.rt[2],i.lt),n.g.bindVertexArray(i.k),n.g.drawElements(i.R.st,i.ft,tt,0),n.g.bindVertexArray(null)}function In(n,t,i){n.g.uniformMatrix4fv(i.R.rt[1],!1,t.t),n.g.uniformMatrix4fv(i.R.rt[2],!1,t.ut),n.g.uniform3fv(i.R.rt[3],i.F||n.F),n.g.bindVertexArray(i.k),n.g.drawElementsInstanced(i.R.st,i.A,tt,0,i.N),n.g.bindVertexArray(null)}function Sn(n,t,i){n.g.uniform4fv(t.R.rt[1],t.mn),n.g.bindBuffer(jn,t.cn),n.g.bufferData(jn,Float32Array.from(i.sn),Vn),n.g.enableVertexAttribArray(1),n.g.vertexAttribPointer(1,4,it,!1,16,0),n.g.drawArrays(t.R.st,0,i.sn.length/4)}function Kn(n,t,i){let e=-1/0,o=1/0;for(let r=0;r<3;r++){let a=(i.tn[r]-n[r])/t[r],l=(i.l[r]-n[r])/t[r];if(a>l&&([a,l]=[l,a]),l<e||a>o)return 1/0;a>e&&(e=a),l<o&&(o=l)}return e>o?1/0:e}function Yn(n,t,i){let e=n[0][t],o=n[3][t],r=n[11][t],a=n.qn.mx/n.it.width*2-1,l=-n.qn.my/n.it.height*2+1,s=[a,l,-1],f=[a,l,1],u=[0,0,0];if(b(s,s,o.gn),b(s,s,e.t),b(f,f,o.gn),b(f,f,e.t),y(u,f,s),C(u,u),r.Dn=function(n,t,i){let e=1/0,o=null;for(let r=0;r<n.length;r++){let a=Kn(t,i,n[r]);a<e&&(e=a,o=r)}if(null!==o)return n[o]}(i,s,u),p(r.Un,s,U(u,u,(5-s[1])/u[1])),r.Dn&&r.Dn.L&At&&n.qn.d0){let t=n[0][r.Dn.H];for(let i of cn(n,t,6))i.Vn=6;for(let i of cn(n,t,5))i.Vn=kt}}function zn(n,t,i){let e=n[21][t];if(e.B>0){e.B-=i;let o=n[0][t];o.S=[Math.random()-.5,Math.random()-.5,Math.random()-.5],o.Hn=!0,e.B<=0&&(e.B=0,o.S=[0,0,0])}}function $n(n,i,e,o){return{K:[I(!0),(r=n,(n,t)=>{n.t[t]|=1048576,n[20][t]={et:r}}),t(3),G(i),Y(e,2)],P:[{zn:[.3,.3,.3],K:[c(new Float32Array(4),e)]},{K:[$(5),K(1,.08),z(e,o)]}]};var r}function Pn(n,i){let e=n[12][i];if(e.yn){let e,o,r=n[0][i];8192&n.t[i]?(e=$n(500,40,[1,1,1],9),o=wt):(e=$n(300,30,[1,0,0],7),o=Ft);let a=v([],r.P[0].P[0].t);n.Yn({...e,S:a,I:r.I.slice()}),n.Yn({K:[Y([1,1,1],5),t(.2)],S:a});for(let t of cn(n,r,5))t.Vn=o;for(let t of cn(n,r,6))t.Vn=3}e.yn=null}function Xn(n){n.Hn&&(n.Hn=!1,qn(n),function(n,t,i,e){let o=t[0],r=t[1],a=t[2],l=t[3],s=o+o,f=r+r,u=a+a,c=o*s,m=o*f,h=o*u,d=r*f,T=r*u,g=a*u,v=l*s,p=l*f,y=l*u,U=e[0],C=e[1],b=e[2];n[0]=(1-(d+g))*U,n[1]=(m+y)*U,n[2]=(h-p)*U,n[3]=0,n[4]=(m-y)*C,n[5]=(1-(c+g))*C,n[6]=(T+v)*C,n[7]=0,n[8]=(h+p)*b,n[9]=(T-v)*b,n[10]=(1-(c+d))*b,n[11]=0,n[12]=i[0],n[13]=i[1],n[14]=i[2],n[15]=1}(n.t,n.I,n.S,n.zn),n.xn&&d(n.t,n.xn.t,n.t),h(n.ut,n.t))}function qn(n){for(let t of n.P)t.Hn=!0,qn(t)}function Dn(n,t){let i=n[8][t].en;for(let e of i)8192&n.t[e.H]&&(n.t[t]&=-513,un(n,n[9][t].hn,[t]))}var Ln,Wn,Bn=1,Gn={Zn:[{tt:[5,,,,,,,,[["triangle",7,1,0,5,8]]],nt:[86]},{tt:[5,,,,,,,,[["triangle",7,1,0,5,8]]],nt:[96]}],Jn:0},On={v:Float32Array.from([-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5]),U:Uint16Array.from([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),p:Float32Array.from([-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0])},_n=35044,Vn=35048,jn=34962,Qn=34963,Hn=35632,Jn=35633,Zn=35713,nt=35714,tt=5123,it=5126,et=1e-6,ot=[.6,.4,0,.4,.2,0,.14,0,0,.2,.8,1,1,1,0,1,.8,.4,.6,.4,0,.2,.2,.2,.53,.53,.53],rt=[[.6,.4,0,.4,.2,0],[0,.47,0,0,.33,0],[.67,0,0,.54,0,0],[.4,.4,.4,.53,.53,.53]],at=[1,1,1,1,1,1,1,1,.8,1,1,.6,1,1,.4,1,1,.2,1,1,0,0,.8,0,.47,.47,.47,.53,0,0,.4,.2,0,0,1,1,.93,0,0],lt=[[.2,.2,.2],[.9,.9,.9],[.53,0,0],[1,0,0]],st=[[0,0,0],[1,1,1],[1,1,0],[.9,0,0]],ft=[[1,0,0],[0,1,0],[0,0,1],[1,1,1]],ut=[[1,.8,.6],[.6,.4,0]],ct=[[1,1,0],[0,0,0],[.6,.4,0],[.4,0,0]],mt=[[0,0,0],[.53,0,0],[.6,.4,.2],[.33,.33,.33]],ht={Zn:[{tt:[5,"bandpass",10,3,,,,,[["triangle",7,2,2,8,8]]],nt:[69,74,69,74,69]},{tt:[4,,,,,,,,[[!1,2,1,1,6],["sine",9,2,2,7,7]]],nt:[38,,,,38,,,,38,,,,38,,41,,43,,,,43,,,,43,,,,43,,41,,38,,,,38,,,,38,,,,38,,41,,43,,,,48,,,,48,,,,48,,43,,38,,,,38,,,,38,,,,41,,,,36,,,,36,,,,36,,,,33,,36,,38,,,,38,,,,33,,,,36,,,,38,,,,38,,,,38,,,,38,,38]}],Jn:19.2},dt={Zn:[{tt:[7,"lowpass",8,6,!0,"sine",9,2,[[!1,3,6,4,13]]],nt:[57]}],Jn:13},Tt={Zn:[{tt:[5,"bandpass",10,3,,,,,[["triangle",7,2,2,8,8]]],nt:[69,74,69,74,69,,,,,,,,65,,,,67,,,,62,,,,,,,,,,,,69,74,69,74,69,,,,,,,,65,,,,67,,,,72,,,,,,,,,,,,69,74,69,74,,,,,,,,,65,,,,64,,62,,60,,,,,,,,,,,,69,74,69,74,69,,,,,,,,67,,,,62]},{tt:[3,,,,,,,,[[!1,2,1,1,6],["sine",9,2,2,7,7]]],nt:[38,,,,38,,,,38,,,,38,,41,,43,,,,43,,,,43,,,,43,,41,,38,,,,38,,,,38,,,,38,,41,,43,,,,48,,,,48,,,,48,,43,,38,,,,38,,,,38,,,,41,,,,36,,,,36,,,,36,,,,33,,36,,38,,,,38,,,,33,,,,36,,,,38,,,,38,,,,38,,,,38,,38]}],Jn:19.2},gt={Zn:[{tt:[4,"lowpass",9,5,!0,"sawtooth",7,9,[[!1,7,3,3,7]]],nt:[57]}],Jn:9},vt=270337,pt=786433,yt=1048961,Ut=131073,Ct=[0,0,0],bt=(Float32Array.from([0,0,0,0,0,10]),Uint16Array.from([1,2]),Float32Array.from([]),document.getElementById("fps")),Rt=4194305,Mt=262273,kt={Zn:[{tt:[7,"lowpass",8,8,,,,,[["sine",4,1,0,3,8]]],nt:[69]}],Jn:.2},At=20,Nt=2097153,wt={Zn:[{tt:[5,"lowpass",10,4,,,,,[[!1,10,0,0,5],["sine",7,0,2,2,8]]],nt:[57]}],Jn:.2},Ft={Zn:[{tt:[4,"lowpass",10,4,,,,,[[!1,10,0,0,5]]],nt:[57]}],Jn:.2},xt=new class{t;Kn=[];0=[];1=[];2=[];3=[];4=[];5=[];6=[];7=[];8=[];9=[];10=[];11=[];12=[];13=[];14=[];15=[];16=[];17=[];18=[];19=[];20=[];21=[];22=[];it;h;g;m;Audio=new AudioContext;ct=document.querySelector("main");Sn=!1;qn={mx:0,my:0};Gn=sn;Ln=~~(Date.now()/864e5);Pn=this.Ln;$n=1;En=0;On=0;Wn;Bn=0;_n=!1;M;un;ht;In;Xn;Y=[];F=at;dt=0;constructor(){this.t=[],document.addEventListener("visibilitychange",(()=>document.hidden?this.Tt():this.gt())),this.it=document.querySelector("canvas"),this.h=document.querySelector("canvas + canvas"),this.g=this.it.getContext("webgl2"),this.m=this.h.getContext("2d"),this.ct.addEventListener("contextmenu",(n=>n.preventDefault())),this.ct.addEventListener("mousedown",(n=>{this.qn["d"+n.button]=1})),this.ct.addEventListener("mousemove",(n=>{this.qn.mx=n.offsetX,this.qn.my=n.offsetY})),this.g.enable(2929),this.g.enable(2884),this.ht=function(n){let t=mn(n,"#version 300 es\n\n\nuniform mat4 p,q;\n\nlayout(location=1) in vec3 k;\n\nvoid main(){\ngl_Position=p*q*vec4(k,1.);\n}\n","#version 300 es\n\nprecision mediump float;\n\nuniform vec4 r;\n\n\nout vec4 z;\n\nvoid main() {\nz=r;\n}\n");return{g:n,st:2,vt:t,rt:[n.getUniformLocation(t,"p"),n.getUniformLocation(t,"q"),n.getUniformLocation(t,"r")]}}(this.g),this.M=function(n){let t=mn(n,"#version 300 es\n\n\nuniform mat4 p,q,r;\n\nuniform vec3 s[16];\n\n\nuniform int t;\n\nuniform vec3 u[100];\n\nuniform vec4 v[100];\n\nlayout(location=1) in vec3 k;\nlayout(location=2) in vec3 m;\nlayout(location=3) in vec4 n;\n\n\nout vec4 o;\n\nvoid main(){\n\nvec4 a=q*vec4(k+n.rgb,1.);\n\nvec3 b=normalize((vec4(m,0.)* r).rgb);\ngl_Position=p*a;\n\n\nvec3 c=s[int(n[3])].rgb*.1;\nfor(int i=0;i<t;i++){\nif(v[i].a<1.) {\n\n\nc+=s[int(n[3])].rgb*v[i].rgb*max(dot(b,normalize(u[i])),0.);\n}else{\n\n\nvec3 ld=u[i]-a.xyz;\n\nfloat d=length(ld);\n\nc+=s[int(n[3])].rgb*v[i].rgb*max(dot(b,normalize(ld)),0.)*v[i].a/(d*d);\n}\n}\n\no=vec4(c,1.);\n}\n","#version 300 es\n\nprecision mediump float;\n\n\nin vec4 o;\n\nout vec4 z;\n\nvoid main(){\nz=o;\n}\n");return{g:n,st:4,vt:t,rt:[n.getUniformLocation(t,"p"),n.getUniformLocation(t,"q"),n.getUniformLocation(t,"r"),n.getUniformLocation(t,"s"),n.getUniformLocation(t,"t"),n.getUniformLocation(t,"u"),n.getUniformLocation(t,"v")]}}(this.g),this.un=function(n){let t=mn(n,"#version 300 es\n\n\nuniform mat4 p;\n\nuniform vec4 q;\n\n\nlayout(location=1) in vec4 k;\n\n\nout vec4 o;\n\nvoid main(){\nvec4 a=vec4(k.rgb,1.);\nif(q.a<10.) {\n\na.y+=k.a*2.;\ngl_PointSize=mix(q.a,1.,k.a);\n}else{\n\na.y+=k.a*10.;\ngl_PointSize=mix(q.a,1.,k.a);\n}\ngl_Position=p*a;\no=mix(vec4(q.rgb,1.),vec4(1.,1.,0.,1.),k.a);\n}\n","#version 300 es\n\nprecision mediump float;\n\n\nin vec4 o;\n\nout vec4 z;\n\nvoid main(){\nz=o;\n}\n");return{g:n,st:0,vt:t,rt:[n.getUniformLocation(t,"p"),n.getUniformLocation(t,"q")]}}(this.g)}yt(n=0){for(let t=0;t<1e4;t++)if(!this.t[t])return this.t[t]=n,t;throw Error("No more entities available.")}Ut(n){let t=performance.now();!function(n,t){for(let i=0;i<n.t.length;i++)(n.t[i]&Rt)==Rt&&An(n,i,t)}(this,n),function(n,t){let i=[];for(let t=0;t<n.t.length;t++)257==(257&n.t[t])&&1!==n[8][t].L&&i.push(n[8][t]);for(let t=0;t<n.t.length;t++)2057==(2057&n.t[t])&&Yn(n,t,i)}(this),function(n,t){for(let t=0;t<n.t.length;t++)(n.t[t]&vt)==vt&&n.In&&tn(n,t)}(this),function(n,t){for(let i=0;i<n.t.length;i++)(n.t[i]&pt)==pt&&bn(n,i,t)}(this,n),function(n,t){for(let t=0;t<n.t.length;t++)(n.t[t]&yt)==yt&&Rn(n,t)}(this),function(n,t){for(let t=0;t<n.t.length;t++)(n.t[t]&Mt)==Mt&&wn(n,t)}(this),function(n,t){for(let t=0;t<n.t.length;t++)4097==(4097&n.t[t])&&dn(n,t)}(this),function(n,t){for(let i=0;i<n.t.length;i++)65537==(65537&n.t[i])&&Fn(n,i,t)}(this,n),function(n,t){for(let i=0;i<n.t.length;i++)(n.t[i]&Nt)==Nt&&zn(n,i,t)}(this,n),function(n,t){for(let i=0;i<n.t.length;i++)65==(65&n.t[i])&&Tn(n,i,t)}(this,n),function(n,t){for(let i=0;i<n.t.length;i++)129==(129&n.t[i])&&Nn(n,i,t)}(this,n),function(n,t){for(let t=0;t<n.t.length;t++)1==(1&n.t[t])&&Xn(n[0][t])}(this),function(n,t){let i=[],e=[];for(let t=0;t<n.t.length;t++)if(257==(257&n.t[t])){let o=n[0][t],r=n[8][t];r.en=[],r.J?(r.J=!1,Cn(o,r)):r.Z?(Cn(o,r),e.push(r)):i.push(r)}for(let n=0;n<e.length;n++)Un(e[n],i,i.length),Un(e[n],e,n)}(this),function(n,t){for(let t=0;t<n.t.length;t++)769==(769&n.t[t])&&Dn(n,t)}(this),function(n,t){for(let t=0;t<n.t.length;t++)4097==(4097&n.t[t])&&Pn(n,t)}(this),function(n,t){for(let t=0;t<n.t.length;t++)16384==(16384&n.t[t])&&kn(n,t)}(this),function(n,t){for(let t=0;t<n.t.length;t++)if(32769==(32769&n.t[t])){let i=n[0][t],e=v([],n[0][n[15][t].yn].t);i.S=M([],i.S,e,.1),i.Hn=!0}}(this),function(n,t){for(let t=0;t<n.t.length;t++)(n.t[t]&Ut)==Ut&&n.In&&Mn(n,t)}(this),function(n,t){for(let i=0;i<n.t.length;i++)32&n.t[i]&&pn(n,i,t)}(this,n),function(n,t){n.it.width==n.it.clientWidth&&n.it.height==n.it.clientHeight||(n.it.width=n.h.width=n.it.clientWidth,n.it.height=n.h.height=n.it.clientHeight,n.Sn=!0);for(let t=0;t<n.t.length;t++)9==(9&n.t[t])&&yn(n,t)}(this),xn(0,performance.now()-t,document.querySelector("#cpu"));let i=performance.now();!function(n,t){n.g.clear(16640),n.Sn&&n.g.viewport(0,0,n.it.width,n.it.height);let i=[],e=[];for(let t=0;t<n.t.length;t++)if(17==(17&n.t[t])){let o=v([],n[0][t].t);i.push(...o),e.push(...n[4][t])}let o=null;for(let t=0;t<n.t.length;t++)if(3==(3&n.t[t])){let r=n[0][t],a=n[1][t];switch(a.R!==o&&(o=a.R,n.g.useProgram(o.vt),n.g.uniformMatrix4fv(o.rt[0],!1,n.In.pn),1===a.C)&&(n.g.uniform1i(o.rt[4],i.length/3),n.g.uniform3fv(o.rt[5],i),n.g.uniform4fv(o.rt[6],e)),a.C){case 0:En(n,r,a);break;case 1:In(n,r,a);break;case 2:{let i=n[16][t];i.sn.length&&Sn(n,a,i);break}}}}(this),function(n,t){n.m.clearRect(0,0,n.h.width,n.h.height);let i=[];for(let t=0;t<n.t.length;t++)5==(5&n.t[t])&&(v(i,n[0][t].t),b(i,i,n.In.pn),n[2][t].i(n,t,.5*(i[0]+1)*n.it.width,.5*(1-i[1])*n.it.height))}(this),function(n,t){let i=(e=n).Gn==sn?'\n<div style="\nwidth: 66%;\nmargin: 10vh auto;\n">\nBACK<br>COUNTRY\n<div onclick="$(3);" style="\nfont: italic bold small-caps 13vmin serif;\nborder-top: 20px solid #d45230;\n">\nPlay Now\n</div>\n<div style="\nfont: italic 5vmin serif;\n">\nEarn as much money as you can in today\'s challenge.\n</div>\n</div>\n':e.Gn==Z?function(n){return`\n<div style="\nwidth: 66%;\nmargin: 5vh auto;\ntext-align: center;\ncolor: #222;\n">\nGENERAL STORE\n</div>\n\n<div onclick="$(11);" style="\nfont: italic bold small-caps 7vmin serif;\nposition: absolute;\nbottom: 15%;\nleft: 10%;\n">\n${n._n?"Change Outfit":'\n<s>Change Outfit</s>\n<div style="font: italic 5vmin serif;">\nBecome a Coil subscriber!\n</div>\n'}\n</div>\n\n<div onclick="$(3);" style="\nfont: italic bold small-caps 7vmin serif;\nposition: absolute;\nbottom: 5%;\nright: 10%;\n">\nConfirm\n</div>\n`}(e):e.Gn==fn?function(n){return`\n<div style="\nwidth: 66%;\nmargin: 5vh auto;\ntext-align: center;\ncolor: #222;\n">\nWANTED\n<div style="font-size: 7vmin;">\nREWARD $${n.$n},000\n</div>\n</div>\n<div onclick="$(3);" style="\nfont: italic bold small-caps 7vmin serif;\nposition: absolute;\nbottom: 5%;\nright: 10%;\n">\nAccept Quest\n</div>\n`}(e):1==e.On?'\n<div style="\nwidth: 66%;\nmargin: 5vh auto;\ntext-align: center;\n">\nWELL DONE\n</div>\n\n<div onclick="$(1);" style="\nfont: italic bold small-caps 7vmin serif;\nposition: absolute;\nbottom: 5%;\nright: 10%;\n">\nCollect Bounty\n</div>\n':2==e.On?function(n){return`\n<div style="\nwidth: 66%;\nmargin: 5vh auto;\ntext-align: center;\n">\nYOU DIE\n<div style="\nfont: italic 5vmin serif;\n">\nYou earned $${n.Bn.toLocaleString("en")}.\n</div>\n</div>\n\n<div onclick="$(2);" style="\nfont: italic bold small-caps 7vmin serif;\nposition: absolute;\nbottom: 5%;\nright: 10%;\n">\nTry Again\n</div>\n`}(e):function(n){return`\n<div style="\nmargin: 3vmin 4vmin;\nfont: 10vmin Impact;\n">\n$${n.Bn.toLocaleString("en")}\n</div>\n`}(e);var e;i!==Wn&&(n.ct.innerHTML=Wn=i)}(this),xn(0,performance.now()-i,document.querySelector("#gpu")),function(n,t){bt&&(bt.textContent=(1/t).toFixed())}(0,n),this.qn.d0=0,this.qn.d2=0,this.Sn=!1}gt(){let n=performance.now(),t=i=>{this.Ut((i-n)/1e3),n=i,this.dt=requestAnimationFrame(t)};this.Tt(),this.Audio.resume(),t(n)}Tt(){this.Audio.suspend(),cancelAnimationFrame(this.dt)}Yn({S:n,I:t,zn:i,K:e=[],P:o=[]}){let r=this.yt(0);!function(n=[0,0,0],t=[0,0,0,1],i=[1,1,1]){return(e,o)=>{e.t[o]|=1,e[0][o]={H:o,t:m(),ut:m(),S:n,I:t,zn:i,P:[],Hn:!0}}}(n,t,i)(this,r);for(let n of e)n(this,r);let a=this[0][r];for(let n of o){let t=this.Yn(n),i=this[0][t];i.xn=a,a.P.push(i)}return r}jn(n){if(1&this.t[n])for(let t of this[0][n].P)this.jn(t.H);this.t[n]=0}};window.$=(...n)=>un(xt,...n),window.game=xt,fetch("./models.tfu").then((n=>n.arrayBuffer())).then((n=>{let t=new Uint16Array(n),i=[],e=0;for(;e<t.length;){let n=[0,0,0],o=e+1,r=o+t[e],a=[];for(e=o;e<r;e++){let n=t[e];a.push((15&n)>>0,(240&n)>>4,(3840&n)>>8,(61440&n)>>12)}for(let t=0;t<a.length;t++)n[t%4]<a[t]+1&&(n[t%4]=a[t]+1);i.push(new Float32Array(a).map(((t,i)=>{switch(i%4){case 0:return t-n[0]/2+.5;case 1:return t-n[1]/2+.5;case 2:return t-n[2]/2+.5;default:return t}})))}return i})).then((n=>{xt.Y=n,sn(xt),xt.gt()}))})();
